(this["webpackJsonpto-do-react"]=this["webpackJsonpto-do-react"]||[]).push([[0],{20:function(e,t,a){e.exports=a(29)},25:function(e,t,a){},26:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),i=(a(25),a(26),a(8)),s=a(6),l=a(3),u=a(12),m=a(13),d=a(15),j=a(14),p=a(31),f=a(32);var E=function(e){return r.a.createElement("nav",null,r.a.createElement("ul",{className:"navbar"},r.a.createElement("li",null,r.a.createElement("button",{className:"nav-link menu-btn",onClick:e.toggleMenu},r.a.createElement(p.a,{className:"feather-icon"}))),r.a.createElement("li",null,r.a.createElement("button",{className:"nav-link home-btn",onClick:function(){e.setCurrentProject("default","All tasks")}},r.a.createElement(f.a,{className:"feather-icon"})))),r.a.createElement("h1",null,"To-do"))},k=a(7),b=a(33);var O=function(e){return r.a.createElement("div",{className:"backdrop",onClick:e.closeForm})},v=a(42),h=a(34);function g(e){return r.a.createElement("button",{type:"submit",className:"save",disabled:e.disabled},r.a.createElement(b.a,null))}function P(e){return r.a.createElement("button",{type:"reset",className:"cancel",onClick:e.onClick},r.a.createElement(h.a,null))}function y(e){var t=e.props,a=t.task||{title:"",description:"",project:{id:t.currentProject.id,title:t.currentProject.title},priority:"3",dueDate:Object(v.a)(Date.now(),"yyyy-MM-dd"),infoType:"task"},c=Object(n.useState)(a),o=Object(k.a)(c,2),s=o[0],u=o[1],m=function(e){var t=e.target,a=t.name,n=t.value;if("project"!==a)u(Object(l.a)(Object(l.a)({},s),{},Object(i.a)({},a,n)));else{var r=JSON.parse(n),c=r.id,o=r.title;u(Object(l.a)(Object(l.a)({},s),{},{project:{id:c,title:o}}))}};return r.a.createElement("form",{name:t.formName,className:"task-form",onSubmit:function(e){e.preventDefault(),"new-task"===t.formName?(t.addTask(s),t.closeForm()):(t.editTask(s),t.closeForm())}},r.a.createElement("h2",null,t.formHeader),r.a.createElement("input",{type:"text",name:"title",value:s.title,placeholder:"Task title",required:!0,onChange:m}),r.a.createElement("textarea",{name:"description",value:s.description,placeholder:"Task description",required:!0,onChange:m}),r.a.createElement("p",null,"Project"),r.a.createElement("select",{name:"project",required:!0,value:JSON.stringify(s.project),onChange:m},t.projects.map((function(e){return r.a.createElement("option",{key:e.id,value:JSON.stringify({id:e.id,title:e.title})},e.title)}))),r.a.createElement("p",null,"Priority"),r.a.createElement("select",{name:"priority",value:s.priority,required:!0,onChange:m},r.a.createElement("option",{value:"3"},"Low priority"),r.a.createElement("option",{value:"2"},"Medium priority"),r.a.createElement("option",{value:"1"},"High priority")),r.a.createElement("input",{type:"date",name:"dueDate",min:Object(v.a)(Date.now(),"yyyy-MM-dd"),value:s.dueDate,required:!0,onChange:m}),r.a.createElement(g,null),r.a.createElement(P,{onClick:t.closeForm}))}var T=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(i.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.addProject(e.state),e.setState({title:""}),e.props.toggleProjectForm()},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{name:"project-form",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"title",placeholder:"Project name",value:this.state.title,required:!0,onChange:this.handleChange}),r.a.createElement(g,{disabled:!this.state.title}),r.a.createElement(P,{onClick:this.props.toggleProjectForm}))}}]),a}(n.Component);function N(e){var t=Object(n.useState)(e.project),a=Object(k.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement(O,{closeForm:e.closeForm}),r.a.createElement("form",{name:"edit-project",onSubmit:function(t){t.preventDefault(),e.editProject(c),e.closeForm()}},r.a.createElement("h2",null,"Edit project"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"title",value:c.title,onChange:function(e){var t=e.target.value,a=c.tasks.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{project:Object(l.a)(Object(l.a)({},e.project),{},{title:t})})}));o(Object(l.a)(Object(l.a)({},c),{},{title:t,tasks:a}))}}),r.a.createElement(g,{disabled:c.title===e.project.title}),r.a.createElement(P,{onClick:e.closeForm}))))}function C(e){return r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement(y,{props:Object(l.a)(Object(l.a)({},e),{},{formName:"new-task",formHeader:"New task"})}))}function S(e){return r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement(y,{props:Object(l.a)({},e)}))}var F=a(35),w=a(36);var M=function(e){function t(t){if(t.stopPropagation(),"edit"===t.target.className)e.openEditForm(e.project);else if("remove"===t.target.className){!0===window.confirm("This action cannot be canceled. Are you sure?")&&e.deleteProject(e.project)}}return r.a.createElement("li",{className:e.currentProject.id===e.project.id?"project-card selected":"project-card",onClick:function(){return e.setCurrentProject(e.project.id,e.project.title)}},r.a.createElement("p",null,e.project.title),"default"!==e.project.id?r.a.createElement("div",null,r.a.createElement("button",{className:"edit",onClick:t},r.a.createElement(F.a,null)),r.a.createElement("button",{className:"remove",onClick:t},r.a.createElement(w.a,null))):null)};var x=function(e){var t=e.projects.map((function(t){return r.a.createElement(M,{key:t.id,project:t,openEditForm:e.openEditForm,deleteProject:e.deleteProject,currentProject:e.currentProject,setCurrentProject:e.setCurrentProject})}));return r.a.createElement("div",null,t)};var D=function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),c=a[0],o=a[1],i=function(){o(!c)};Object(n.useEffect)((function(){e.isMenuOpen||o(!1)}),[e.isMenuOpen]);var l,u=["menu-panel"];return e.isMenuOpen&&(u=[].concat(Object(s.a)(u),["open"])),l=c?r.a.createElement(T,{toggleProjectForm:i,addProject:e.addProject}):r.a.createElement("button",{className:"new-project-btn",onClick:i},r.a.createElement(b.a,null),r.a.createElement("p",null,"New project")),r.a.createElement("div",{className:u.join(" ")},r.a.createElement("ul",{className:"projects-container"},r.a.createElement(x,{projects:e.projects,currentProject:e.currentProject,setCurrentProject:e.setCurrentProject,openEditForm:e.openEditForm,deleteProject:e.deleteProject})),l)},I=a(38),J=a(37),A=a(44),q=a(39),H=a(40),B=a(41);var L=function(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),l=Object(k.a)(i,2),u=l[0],m=l[1],d=Object(n.useState)(!1),j=Object(k.a)(d,2),p=j[0],f=j[1];Object(n.useEffect)((function(){m(!1)}),[e.currentProject]);var E,b=["task-wrapper"];return b="1"===e.task.priority?[].concat(Object(s.a)(b),["high-priority"]):"2"===e.task.priority?[].concat(Object(s.a)(b),["medium-priority"]):[].concat(Object(s.a)(b),["low-priority"]),E=Object(J.a)(Object(I.a)(e.task.dueDate))?"Today":Object(A.a)(Object(I.a)(e.task.dueDate))?"Tomorrow":Object(v.a)(Object(I.a)(e.task.dueDate),"PPP"),r.a.createElement("li",{className:b.join(" ")},r.a.createElement("div",{className:"task-card"},r.a.createElement("button",{className:"expand-btn",onClick:function(){m((function(e){return!e}))}},u?r.a.createElement(q.a,null):r.a.createElement(H.a,null)),r.a.createElement("div",null,r.a.createElement("p",null,e.task.title),r.a.createElement("div",{className:"task-info-container"},r.a.createElement("p",{className:"task-info"},"Due: ",E))),r.a.createElement("input",{type:"checkbox",checked:c,onChange:function(){return null}}),r.a.createElement("label",{onClick:function(){o((function(e){return!e})),e.deleteTask(e.task)},onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)}},c||p?r.a.createElement(B.a,null):null)),u?r.a.createElement("div",{className:"expanded-info-container"},r.a.createElement("p",{className:"task-project-info"},e.projectTitle),r.a.createElement("p",null,e.task.description),r.a.createElement("button",{className:"edit",onClick:function(){e.openEditForm(e.task)}},"Edit task")):null)};var W=function(e){var t,a=e.projects.filter((function(t){return t.id===e.currentProject.id?t:null}))[0],n=function(e){return e.sort((function(e,t){return JSON.parse(e.priority)<JSON.parse(t.priority)?1:-1})).sort((function(e,t){return Object(I.a)(e.dueDate)>Object(I.a)(t.dueDate)?1:-1}))};return t="default"===a.id?n(e.projects.map((function(e){return e.tasks})).reduce((function(e,t){return e.concat(t)}))).map((function(t){return r.a.createElement(L,{key:t.id,task:t,projectTitle:t.project.title,deleteTask:e.deleteTask,openEditForm:e.openEditForm,currentProject:e.currentProject})})):n(a.tasks).map((function(t){return r.a.createElement(L,{key:t.id,task:t,projectTitle:t.project.title,deleteTask:e.deleteTask,openEditForm:e.openEditForm,currentProject:e.currentProject})})),r.a.createElement("ul",{className:"task-list"},t,r.a.createElement("button",{className:"new-task-btn",onClick:e.openNewTaskForm},r.a.createElement(b.a,null),r.a.createElement("p",null,"New task")))},$=a(43),z=function(){if(!("projects"in localStorage)){localStorage.setItem("projects",JSON.stringify([{title:"All tasks",id:"default",tasks:[]}]))}return JSON.parse(localStorage.getItem("projects"))}(),G=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={projects:z,isMenuOpen:!1,isEditingProject:!1,isEditingTask:!1,itemToEdit:{},isCreatingTask:!1,currentProject:{id:"default",title:"All tasks"}},e.toggleMenu=function(){e.setState((function(e){return{isMenuOpen:!e.isMenuOpen}}))},e.setCurrentProject=function(t,a){e.setState({currentProject:{id:t,title:a}})},e.getTaskIndex=function(e,t){return e.findIndex((function(e){return e.id===t.id}))},e.updateStorage=function(t){e.setState({projects:t}),localStorage.setItem("projects",JSON.stringify(t))},e.addTask=function(t){t.id=t.id||Object($.a)();var a=e.state.projects.map((function(e){return e.id===t.project.id?Object(l.a)(Object(l.a)({},e),{},{tasks:[].concat(Object(s.a)(e.tasks),[t])}):Object(l.a)({},e)}));e.updateStorage(a)},e.deleteTask=function(t){var a=e.state.projects.map((function(a){if(-1!==e.getTaskIndex(a.tasks,t)){var n=e.getTaskIndex(a.tasks,t);return Object(l.a)(Object(l.a)({},a),{},{tasks:[].concat(Object(s.a)(a.tasks.slice(0,n)),Object(s.a)(a.tasks.slice(n+1)))})}return a}));e.updateStorage(a)},e.editTask=function(t){var a=e.state.projects.map((function(a){if(-1!==e.getTaskIndex(a.tasks,t)){var n=e.getTaskIndex(a.tasks,t);return Object(l.a)(Object(l.a)({},a),{},{tasks:[].concat(Object(s.a)(a.tasks.slice(0,n)),Object(s.a)(a.tasks.slice(n+1)))})}return a})).map((function(e){return e.id===t.project.id?Object(l.a)(Object(l.a)({},e),{},{tasks:[].concat(Object(s.a)(e.tasks),[t])}):Object(l.a)({},e)}));e.updateStorage(a)},e.addProject=function(t){t.id=Object($.a)(),t.infoType="project",t.tasks=[],e.setState((function(e){return{projects:[].concat(Object(s.a)(e.projects),[t])}})),localStorage.setItem("projects",JSON.stringify([].concat(Object(s.a)(e.state.projects),[t])))},e.editProject=function(t){var a=e.state.projects.map((function(e){return e.id===t.id?Object(l.a)(Object(l.a)({},e),{},{title:t.title,tasks:t.tasks}):Object(l.a)({},e)}));e.updateStorage(a)},e.deleteProject=function(t){t.id===e.state.currentProject.id&&e.setState({currentProject:{id:"default",title:"All tasks"}});var a=e.state.projects.filter((function(e){return e.id!==t.id?Object(l.a)({},e):null}));e.updateStorage(a)},e.openNewTaskForm=function(){e.setState({isCreatingTask:!0})},e.openEditForm=function(t){"project"===t.infoType?e.setState({isEditingProject:!0,itemToEdit:t}):"task"===t.infoType&&e.setState({isEditingTask:!0,itemToEdit:t})},e.closeForm=function(t){var a;e.setState((a={},Object(i.a)(a,t,!1),Object(i.a)(a,"itemToEdit",{}),a))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},this.state.isEditingProject?r.a.createElement(N,{project:this.state.itemToEdit,closeForm:function(){e.closeForm("isEditingProject")},editProject:this.editProject,editTask:this.editTask}):null,this.state.isCreatingTask?r.a.createElement(C,{projects:this.state.projects,currentProject:this.state.currentProject,closeForm:function(){e.closeForm("isCreatingTask")},addTask:this.addTask}):null,this.state.isEditingTask?r.a.createElement(S,{projects:this.state.projects,task:this.state.itemToEdit,currentProject:this.state.currentProject,closeForm:function(){e.closeForm("isEditingTask")},editTask:this.editTask}):null,r.a.createElement(E,{toggleMenu:this.toggleMenu,currentProject:this.state.currentProject,setCurrentProject:this.setCurrentProject}),r.a.createElement("div",{className:this.state.isMenuOpen?"underlayer widened":"underlayer"}),r.a.createElement(D,{projects:this.state.projects,currentProject:this.state.currentProject,setCurrentProject:this.setCurrentProject,isMenuOpen:this.state.isMenuOpen,addProject:this.addProject,openEditForm:this.openEditForm,deleteProject:this.deleteProject}),r.a.createElement(W,{projects:this.state.projects,currentProject:this.state.currentProject,openNewTaskForm:this.openNewTaskForm,openEditForm:this.openEditForm,deleteTask:this.deleteTask}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.6162eff2.chunk.js.map